# For testing and development.

---
services:
  operations:
    image: geerlingguy/docker-${MOLECULE_DISTRO:-rockylinux10}-ansible:latest
    hostname: ${DOCKER_HOSTNAME:-operations.local.computer}
    cgroup: host
    cgroup_parent: docker.slice
    privileged: true
    volumes:
      - ./:/usr/share/operations
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
      - ./ansible:/etc/ansible
      - ./roles/operations.runner/scripts/github-runner-installer:/usr/local/bin/github-runner-installer
    environment:
      - OPERATIONS_PLATFORM=yes
    env_file:
      - .env
    build: ./
